import{j as s}from"./ui-BnyrJ_8h.js";import{r as e}from"./vendor-fk5su2KB.js";import{c as d}from"./index-DqWWGWjz.js";const R=({src:h,alt:c,className:p,fallback:l,placeholder:v,onLoad:r,eager:t=!1})=>{const[u,x]=e.useState(!1),[o,j]=e.useState(t),[n,b]=e.useState(!1),g=e.useRef(null),f=e.useRef(null);e.useEffect(()=>{if(t)return;const a=f.current;if(!a||o)return;const i=new IntersectionObserver(([E])=>{E.isIntersecting&&(j(!0),i.unobserve(a))},{threshold:.1,rootMargin:"50px"});return i.observe(a),()=>i.disconnect()},[t,o]);const m=()=>{x(!0),r==null||r()},w=()=>{b(!0)};return s.jsxs("div",{ref:f,className:d("relative overflow-hidden",p),children:[!u&&!n&&s.jsx("div",{className:"absolute inset-0",children:v||s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/40 to-muted/60 animate-pulse"})}),o&&!n&&s.jsx("img",{ref:g,src:h,alt:c,className:d("w-full h-full object-cover transition-opacity duration-500",u?"opacity-100":"opacity-0"),onLoad:m,onError:w,loading:t?"eager":"lazy"}),n&&l&&s.jsx("img",{src:l,alt:c,className:"w-full h-full object-cover",onLoad:m})]})};export{R as L};
